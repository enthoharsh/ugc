(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[31],{487:function(e,a,s){"use strict";s.d(a,"a",(function(){return u}));var t=s(174),o=s.n(t),l=s(19),i=s(489).a(),r=s(33),n=s(284);const c=o.a.create({baseURL:l.a,timeout:6e4}),d="/auth/login";c.interceptors.request.use((e=>{const a=localStorage.getItem(r.b);return a&&(e.headers.authorization="Bearer "+a),a||e.headers["public-request"]||(i.push(d),window.location.reload()),e}),(e=>{n.a.error({message:"Error"}),Promise.reject(e)})),c.interceptors.response.use((e=>e.data),(e=>{let a={message:""};return 400!==e.response.status&&403!==e.response.status||(a.message="Authentication Fail",a.description="Please login again",localStorage.removeItem(r.b),i.push(d),window.location.reload()),404===e.response.status&&(a.message="Not Found"),500===e.response.status&&(a.message="Internal Server Error"),508===e.response.status&&(a.message="Time Out"),n.a.error(a),Promise.reject(e)}));const u=new class{async get(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await c.post("/api/"+e+"/get",a).catch((e=>{}))}catch(n){var s,t,o,l,i,r;return(null===n||void 0===n||null===(s=n.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||(null===n||void 0===n||null===(o=n.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.errors)||(null===n||void 0===n||null===(i=n.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.errors)?n.response.data:{success:!1,message:"Error in getting"}}}async getSingle(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await c.post("/api/"+e+"/getSingle",a)}catch(n){var s,t,o,l,i,r;return(null===n||void 0===n||null===(s=n.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||(null===n||void 0===n||null===(o=n.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.errors)||(null===n||void 0===n||null===(i=n.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.errors)?n.response.data:{success:!1,message:"Error in getting"}}}async customRoute(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await c.post("/api/"+e,a)}catch(n){var s,t,o,l,i,r;return(null===n||void 0===n||null===(s=n.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||(null===n||void 0===n||null===(o=n.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.errors)||(null===n||void 0===n||null===(i=n.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.errors)?n.response.data:{success:!1,message:"Error in getting"}}}async save(e,a){try{return await c.post("/api/"+e+"/create",a)}catch(n){var s,t,o,l,i,r;return(null===n||void 0===n||null===(s=n.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||(null===n||void 0===n||null===(o=n.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.errors)||(null===n||void 0===n||null===(i=n.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.errors)?n.response.data:{success:!1,message:"Error in saving"}}}async update(e,a,s){try{a._id=s;return await c.post("/api/"+e+"/update",a)}catch(d){var t,o,l,i,r,n;return(null===d||void 0===d||null===(t=d.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||(null===d||void 0===d||null===(l=d.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.errors)||(null===d||void 0===d||null===(r=d.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.errors)?d.response.data:{success:!1,message:"Error in saving"}}}async uploadFile(e,a){try{return await c.post("/api/"+e+"/uploadFile",a)}catch(n){var s,t,o,l,i,r;return(null===n||void 0===n||null===(s=n.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||(null===n||void 0===n||null===(o=n.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.errors)||(null===n||void 0===n||null===(i=n.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.errors)?n.response.data:{success:!1,message:"Error in saving"}}}async delete(e,a){try{const s={_id:a};return await c.post("/api/"+e+"/delete",s)}catch(n){var s,t,o,l,i,r;return(null===n||void 0===n||null===(s=n.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||(null===n||void 0===n||null===(o=n.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.errors)||(null===n||void 0===n||null===(i=n.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.errors)?n.response.data:{success:!1,message:"Error in deleting"}}}};a.b=c},671:function(e,a,s){"use strict";s.r(a);var t=s(18),o=s(0),l=s(463),i=s(466),r=s(283),n=s(507),c=s(681),d=s(107),u=s(465),v=s(471),p=s(497),j=s(557),b=s(690),h=s(691),g=s(286),m=s(70),O=s(487),x=s(532),f=s.n(x),y=s(1);const{Title:w,Text:k}=l.a,{TextArea:_}=i.a;a.default=()=>{const[e,a]=Object(o.useState)(!1),[s,l]=Object(o.useState)(null),[x,N]=Object(o.useState)(!0),[S,E]=Object(o.useState)([]),F=JSON.parse(localStorage.getItem("main_user")),C="Creator"===F.role,[D,L]=Object(o.useState)({cover_image:"",available:!0,bio:"",social_links:[{platform:"facebook",url:""},{platform:"instagram",url:""},{platform:"linkedin",url:""},{platform:"twitter",url:""}],videos:[]});Object(o.useEffect)((()=>{R()}),[]);const R=async()=>{try{const s=await O.a.get("Portfolios",{tabFilter:{user_id:F._id}});if(console.log(s),s.data.data.length>0){var e,a;const t=s.data.data[0];console.log(t),l(t),L({cover_image:t.cover_image||"",available:null===(e=t.available)||void 0===e||e,bio:t.bio||"",social_links:(null===(a=t.social_links)||void 0===a?void 0:a.length)?t.social_links:[{platform:"facebook",url:""},{platform:"instagram",url:""},{platform:"linkedin",url:""},{platform:"twitter",url:""}],videos:t.videos||[]})}N(!1)}catch(s){r.b.error("Failed to fetch portfolio"),N(!1)}};return Object(y.jsxs)("div",{className:"profile-card",children:[Object(y.jsx)("div",{className:"background-image",style:{background:"url(".concat(D.cover_image||"https://images.unsplash.com/photo-1736254329261-5595925b7e25?q=80&w=2874&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",")"),position:"relative"},children:e&&Object(y.jsx)(c.a,{customRequest:async e=>{if("uploading"===e.file.status)return;const a=new FileReader;a.readAsDataURL(e.file),a.onload=()=>{O.a.uploadFile("Users",{file:a.result,extension:e.file.name.split(".").pop()}).then((a=>{a.success&&(L((e=>Object(t.a)(Object(t.a)({},e),{},{cover_image:a.url}))),e.onSuccess())}))}},showUploadList:!1,accept:"image/*",children:Object(y.jsx)(d.a,{icon:Object(y.jsx)(j.a,{}),style:{position:"absolute",bottom:20,right:20},children:"Change Cover"})})}),Object(y.jsxs)("div",{className:"content",children:[Object(y.jsxs)("div",{className:"profile-header",children:[Object(y.jsx)(u.a,{size:100,style:{border:"1px solid white"},src:F.profile_picture}),Object(y.jsxs)("div",{className:"profile-info",children:[Object(y.jsx)(w,{style:{color:"white",marginBottom:0},level:3,children:F.name}),Object(y.jsx)(k,{style:{color:"white",marginBottom:"6px"},children:F.country})]})]}),Object(y.jsxs)("div",{className:"availability",children:[Object(y.jsx)(k,{children:"Are you available for new projects?"}),e?Object(y.jsx)(v.a,{checked:D.available,onChange:e=>L((a=>Object(t.a)(Object(t.a)({},a),{},{available:e})))}):Object(y.jsx)(v.a,{checked:D.available,disabled:!0})]}),Object(y.jsxs)("div",{style:{display:"flex",gap:"28px"},children:[Object(y.jsxs)("div",{className:"bio-section",style:{width:"50%"},children:[Object(y.jsx)(w,{level:4,children:"Creator Bio"}),e?Object(y.jsx)(_,{value:D.bio,onChange:e=>L((a=>Object(t.a)(Object(t.a)({},a),{},{bio:e.target.value}))),rows:6,placeholder:"Enter your bio..."}):Object(y.jsx)(k,{children:D.bio})]}),Object(y.jsxs)("div",{className:"social-links",children:[Object(y.jsx)(w,{level:4,children:"Social Links"}),Object(y.jsx)("div",{title:"Social Links",className:"social-card",children:(()=>{const a={facebook:Object(y.jsx)(m.g,{}),instagram:Object(y.jsx)(m.j,{}),linkedin:Object(y.jsx)(m.k,{}),twitter:Object(y.jsx)(m.p,{})};return Object(y.jsx)(n.b,{direction:"vertical",size:"large",style:{width:"100%"},children:D.social_links.map(((s,o)=>e?Object(y.jsx)(i.a,{prefix:a[s.platform],value:s.url,onChange:e=>{const a=[...D.social_links];a[o].url=e.target.value,L((e=>Object(t.a)(Object(t.a)({},e),{},{social_links:a})))},placeholder:"Enter your ".concat(s.platform," URL")},o):Object(y.jsxs)("a",{href:s.url,className:"social-link",target:"_blank",children:[a[s.platform]," ",s.url||"https://www.".concat(s.platform,".com/name")]},o)))})})()})]})]})]}),Object(y.jsx)("div",{className:"portfolio-grid",style:{padding:"20px"},children:D.videos.map(((a,s)=>Object(y.jsxs)(p.a,{className:"portfolio-item",children:[Object(y.jsx)("div",{className:"video-container",children:Object(y.jsx)("video",{src:a.url,controls:!0,style:{width:"100%",height:"100%",objectFit:"cover"}})}),Object(y.jsxs)("div",{className:"video-info",children:[e?Object(y.jsx)(i.a,{value:a.title,onChange:e=>{const a=[...D.videos];a[s].title=e.target.value,L((e=>Object(t.a)(Object(t.a)({},e),{},{videos:a})))}}):Object(y.jsx)("h5",{children:a.title}),Object(y.jsx)("p",{children:new Date(a.date).toLocaleDateString()})]})]},s)))}),Object(y.jsx)("div",{style:{padding:20,width:"100%"},children:e&&Object(y.jsxs)(f.a,{customRequest:async e=>{if("uploading"===e.file.status)return;const a=new FileReader;a.readAsDataURL(e.file),a.onload=()=>{O.a.uploadFile("Users",{file:a.result,extension:e.file.name.split(".").pop()}).then((a=>{a.success&&L((s=>Object(t.a)(Object(t.a)({},s),{},{videos:[...s.videos,{url:a.url,title:e.file.name,date:(new Date).toISOString()}]})))}))}},showUploadList:!1,accept:"video/*",children:[Object(y.jsx)("p",{className:"ant-upload-drag-icon",children:Object(y.jsx)(b.a,{})}),Object(y.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),Object(y.jsx)("p",{className:"ant-upload-hint",children:"Please upload your videos here"})]})}),C&&Object(y.jsx)(d.a,{type:"primary",icon:e?Object(y.jsx)(h.a,{}):Object(y.jsx)(g.a,{}),style:{position:"absolute",top:20,right:20},onClick:e?async()=>{try{const e=Object(t.a)({user_id:F._id},D);s?await O.a.update("Portfolios",Object(t.a)({_id:s._id},e),s._id):await O.a.save("Portfolios",e),r.b.success("Portfolio saved successfully"),a(!1),R()}catch(e){r.b.error("Failed to save portfolio")}}:()=>a(!0),children:e?"Save":"Edit"})]})}}}]);
//# sourceMappingURL=31.20b65592.chunk.js.map