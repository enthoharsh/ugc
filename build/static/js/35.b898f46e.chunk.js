(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[35],{689:function(e,t,a){"use strict";a.r(t);var n=a(16),s=a(0),i=a(471),r=a(211),c=a(236),l=a(511),d=a(473),o=a(512),j=a(109),p=a(124),x=a(78),b=a(478),y=a(705),h=a(703),m=a(503),g=a(481),O=a(531),u=a(486),f=a(265),v=a(559),C=a(716),k=a(560),S=a(218),w=a(212),P=a(1);const{Title:R,Text:_}=i.a,{TabPane:A}=r.a;t.default=()=>{const[e,t]=Object(s.useState)(!0),[a,i]=Object(s.useState)([]),[r,A]=Object(s.useState)([]),[z,B]=Object(s.useState)([]),[V,M]=Object(s.useState)({totalUsers:0,pendingVerifications:0,totalRevenue:0,pendingPayouts:0,activeContracts:0}),U="#fd5c02",N="#FC52E4",T="#4CAF50",I="#faad14",F="#F5222D",L="#2C3E50",D="#8392A5",E="#F8FAFC";Object(s.useEffect)((()=>{(async()=>{t(!0);try{var e,a,s;const r=await w.a.get("Users",{}),c=await w.a.get("Contracts",{tabFilter:{status:"Completed",payment_status:{$ne:"Paid"}}}),l=await w.a.get("Campaigns",{});if(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.data){const e=r.data.data||[];i(e);const t=e.filter((e=>"Creator"===e.role&&!1===e.verified)).length;M((a=>Object(n.a)(Object(n.a)({},a),{},{totalUsers:e.length,pendingVerifications:t})))}if(null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.data){const e=c.data.data||[];A(e);const t=e.reduce(((e,t)=>e+(t.amount||0)),0),a=e.filter((e=>"Paid"!==e.payment_status)).reduce(((e,t)=>e+(t.amount||0)),0),s=e.filter((e=>"In Progress"===e.status)).length;M((e=>Object(n.a)(Object(n.a)({},e),{},{totalRevenue:t,pendingPayouts:a,activeContracts:s})))}(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.data)&&B(l.data.data||[])}catch(r){console.error("Error fetching dashboard data:",r)}finally{t(!1)}})()}),[]);const J=e=>{window.location.href=e};if(e)return Object(P.jsx)("div",{className:"loading-container",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:Object(P.jsx)(c.a,{size:"large"})});const K=[{title:"Name",key:"name",render:(e,t)=>Object(P.jsxs)(l.b,{children:[Object(P.jsx)(d.a,{src:t.profile_picture,icon:Object(P.jsx)(u.a,{}),style:{backgroundColor:"Brand"===t.role?U:N}}),Object(P.jsxs)(_,{style:{fontWeight:500},children:[t.name," ",t.last_name||""]})]})},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"role",key:"role",render:e=>Object(P.jsx)(o.a,{color:"Brand"===e?U:"Creator"===e?N:"purple",children:e})},{title:"Status",key:"verified",render:(e,t)=>Object(P.jsx)(o.a,{color:t.verified?"green":"red",children:t.verified?"Verified":"Unverified"})},{title:"Actions",key:"actions",render:(e,t)=>Object(P.jsx)(j.a,{type:"link",icon:Object(P.jsx)(f.a,{}),onClick:()=>J("/app/admin/users"),children:"View"})}],$=[{title:"Contract ID",key:"id",render:(e,t)=>{var a;return Object(P.jsxs)(_,{copyable:!0,children:[null===(a=t._id)||void 0===a?void 0:a.substring(0,8),"..."]})}},{title:"Creator",key:"creator",render:(e,t)=>{var a,n;return Object(P.jsxs)(l.b,{children:[Object(P.jsx)(d.a,{src:null===(a=t.user)||void 0===a?void 0:a.profile_picture,icon:Object(P.jsx)(u.a,{})}),Object(P.jsx)(_,{children:(null===(n=t.user)||void 0===n?void 0:n.name)||"Unknown"})]})}},{title:"Brand",key:"brand",render:(e,t)=>{var a;return Object(P.jsx)(_,{children:(null===(a=t.campaign)||void 0===a?void 0:a.brand_name)||"Unknown"})}},{title:"Amount",dataIndex:"amount",key:"amount",render:e=>"$".concat((null===e||void 0===e?void 0:e.toFixed(2))||"0.00")},{title:"Status",key:"payment_status",render:(e,t)=>Object(P.jsx)(o.a,{color:"Pending Release"===t.payment_status?"orange":"volcano",children:t.payment_status||"Pending"})},{title:"Actions",key:"actions",render:(e,t)=>Object(P.jsx)(j.a,{type:"primary",size:"small",onClick:()=>J("/app/admin/contracts"),children:"Process"})}];return Object(P.jsxs)("div",{className:"admin-dashboard",children:[Object(P.jsxs)("div",{className:"welcome-section",style:{marginBottom:24,background:E,padding:"24px",borderRadius:"8px"},children:[Object(P.jsx)(R,{level:3,style:{color:L,marginBottom:"8px"},children:"Admin Dashboard"}),Object(P.jsx)(_,{type:"secondary",children:"Manage platform users, contracts and payments"})]}),Object(P.jsxs)(p.a,{gutter:[24,24],children:[Object(P.jsx)(x.a,{xs:24,sm:12,md:6,children:Object(P.jsxs)(b.a,{hoverable:!0,className:"stat-card",bodyStyle:{padding:"24px"},children:[Object(P.jsx)(y.a,{title:Object(P.jsx)("span",{style:{color:D},children:"Total Users"}),value:V.totalUsers,valueStyle:{color:N,fontSize:"24px"},prefix:Object(P.jsx)(v.a,{})}),Object(P.jsx)("div",{style:{marginTop:"12px"},children:Object(P.jsx)(j.a,{type:"link",style:{paddingLeft:0,fontSize:"12px"},onClick:()=>J("/app/admin/users"),children:"View all users"})})]})}),Object(P.jsx)(x.a,{xs:24,sm:12,md:6,children:Object(P.jsxs)(b.a,{hoverable:!0,className:"stat-card",bodyStyle:{padding:"24px"},children:[Object(P.jsx)(y.a,{title:Object(P.jsx)("span",{style:{color:D},children:"Pending Verifications"}),value:V.pendingVerifications,valueStyle:{color:I,fontSize:"24px"},prefix:Object(P.jsx)(C.a,{})}),Object(P.jsx)("div",{style:{marginTop:"12px"},children:Object(P.jsx)(j.a,{type:"link",style:{paddingLeft:0,fontSize:"12px"},onClick:()=>J("/app/admin/users"),children:"Review users"})})]})}),Object(P.jsx)(x.a,{xs:24,sm:12,md:6,children:Object(P.jsxs)(b.a,{hoverable:!0,className:"stat-card",bodyStyle:{padding:"24px"},children:[Object(P.jsx)(y.a,{title:Object(P.jsx)("span",{style:{color:D},children:"Total Revenue"}),value:V.totalRevenue,precision:2,valueStyle:{color:T,fontSize:"24px"},prefix:Object(P.jsx)(k.a,{}),suffix:"USD"}),Object(P.jsx)("div",{style:{marginTop:"12px"},children:Object(P.jsx)(j.a,{type:"link",style:{paddingLeft:0,fontSize:"12px"},onClick:()=>J("/app/admin/contracts"),children:"View details"})})]})}),Object(P.jsx)(x.a,{xs:24,sm:12,md:6,children:Object(P.jsxs)(b.a,{hoverable:!0,className:"stat-card",bodyStyle:{padding:"24px"},children:[Object(P.jsx)(y.a,{title:Object(P.jsx)("span",{style:{color:D},children:"Pending Payouts"}),value:V.pendingPayouts,precision:2,valueStyle:{color:F,fontSize:"24px"},prefix:Object(P.jsx)(k.a,{}),suffix:"USD"}),Object(P.jsx)("div",{style:{marginTop:"12px"},children:Object(P.jsx)(j.a,{type:"link",style:{paddingLeft:0,fontSize:"12px"},onClick:()=>J("/app/admin/contracts"),children:"Process payments"})})]})})]}),Object(P.jsxs)(p.a,{gutter:[24,24],style:{marginTop:24},children:[Object(P.jsxs)(x.a,{xs:24,md:16,children:[Object(P.jsx)(b.a,{title:Object(P.jsx)("span",{style:{color:L},children:"Recent Users"}),style:{marginBottom:24,borderRadius:"8px"},extra:Object(P.jsx)(j.a,{type:"primary",ghost:!0,onClick:()=>J("/app/admin/users"),children:"Manage All Users"}),bodyStyle:{padding:"0px"},children:a.length>0?Object(P.jsx)(h.a,{columns:K,dataSource:a.slice(0,5),rowKey:"_id",pagination:!1,size:"middle"}):Object(P.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:"No users found"})}),Object(P.jsx)(b.a,{title:Object(P.jsx)("span",{style:{color:L},children:"Pending Payments"}),style:{borderRadius:"8px"},extra:Object(P.jsx)(j.a,{type:"primary",ghost:!0,onClick:()=>J("/app/admin/contracts"),children:"View All Payments"}),bodyStyle:{padding:0===r.length?"24px":"0px"},children:r.length>0?Object(P.jsx)(h.a,{columns:$,dataSource:r.filter((e=>"Paid"!==e.payment_status)).slice(0,5),rowKey:"_id",pagination:!1,size:"middle"}):Object(P.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:"No pending payments"})})]}),Object(P.jsxs)(x.a,{xs:24,md:8,children:[Object(P.jsxs)(b.a,{title:Object(P.jsx)("span",{style:{color:L},children:"Platform Status"}),style:{marginBottom:24,borderRadius:"8px"},bodyStyle:{padding:"24px"},children:[Object(P.jsxs)("div",{style:{marginBottom:24},children:[Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[Object(P.jsx)(_,{children:"Active Campaigns"}),Object(P.jsx)(_,{strong:!0,children:z.filter((e=>!e.is_completed)).length})]}),Object(P.jsx)(m.a,{percent:Math.min(100,Math.round(z.filter((e=>!e.is_completed)).length/Math.max(1,z.length)*100)),strokeColor:U})]}),Object(P.jsxs)("div",{style:{marginBottom:24},children:[Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[Object(P.jsx)(_,{children:"Active Contracts"}),Object(P.jsx)(_,{strong:!0,children:V.activeContracts})]}),Object(P.jsx)(m.a,{percent:Math.min(100,Math.round(V.activeContracts/Math.max(1,r.length)*100)),strokeColor:N})]}),Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[Object(P.jsx)(_,{children:"Verified Creators"}),Object(P.jsxs)(_,{strong:!0,children:[a.filter((e=>"Creator"===e.role&&e.verified)).length," / ",a.filter((e=>"Creator"===e.role)).length]})]}),Object(P.jsx)(m.a,{percent:Math.min(100,Math.round(a.filter((e=>"Creator"===e.role&&e.verified)).length/Math.max(1,a.filter((e=>"Creator"===e.role)).length)*100)),strokeColor:T})]})]}),Object(P.jsx)(b.a,{title:Object(P.jsx)("span",{style:{color:L},children:"Quick Links"}),style:{borderRadius:"8px"},bodyStyle:{padding:"16px 24px"},children:Object(P.jsx)(g.b,{split:!0,renderItem:e=>Object(P.jsx)(g.b.Item,{style:{padding:"12px 0"},children:e}),dataSource:[Object(P.jsxs)("div",{children:[Object(P.jsx)(j.a,{type:"link",icon:Object(P.jsx)(u.a,{}),style:{paddingLeft:0},onClick:()=>J("/app/admin/users"),children:"Manage Users"}),Object(P.jsx)("div",{children:Object(P.jsx)(_,{type:"secondary",children:"Approve or reject user accounts"})})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)(j.a,{type:"link",icon:Object(P.jsx)(C.a,{}),style:{paddingLeft:0},onClick:()=>J("/app/admin/contracts"),children:"Manage Contracts"}),Object(P.jsx)("div",{children:Object(P.jsx)(_,{type:"secondary",children:"Process payments for completed contracts"})})]})]})}),Object(P.jsxs)(b.a,{title:Object(P.jsx)("span",{style:{color:L},children:"System Notices"}),style:{marginTop:24,borderRadius:"8px"},bodyStyle:{padding:"24px"},children:[V.pendingVerifications>0&&Object(P.jsx)(O.a,{message:"".concat(V.pendingVerifications," creator").concat(1!==V.pendingVerifications?"s":""," awaiting verification"),description:"Review and approve creators to help them start earning",type:"warning",showIcon:!0,action:Object(P.jsx)(j.a,{size:"small",type:"primary",onClick:()=>J("/app/admin/users"),children:"Review"}),style:{marginBottom:16}}),r.filter((e=>"Pending Release"===e.payment_status)).length>0&&Object(P.jsx)(O.a,{message:"".concat(r.filter((e=>"Pending Release"===e.payment_status)).length," payment").concat(1!==r.filter((e=>"Pending Release"===e.payment_status)).length?"s":""," ready for processing"),description:"Completed contracts awaiting payment release",type:"info",showIcon:!0,action:Object(P.jsx)(j.a,{size:"small",type:"primary",onClick:()=>J("/app/admin/contracts"),children:"Process"})}),0===V.pendingVerifications&&0===r.filter((e=>"Pending Release"===e.payment_status)).length&&Object(P.jsxs)("div",{style:{textAlign:"center",padding:"20px 0"},children:[Object(P.jsx)(S.a,{style:{fontSize:32,color:T,marginBottom:16}}),Object(P.jsx)("div",{children:Object(P.jsx)(_,{children:"All systems operational"})}),Object(P.jsx)("div",{children:Object(P.jsx)(_,{type:"secondary",children:"No pending actions required"})})]})]})]})]})]})}}}]);
//# sourceMappingURL=35.b898f46e.chunk.js.map