(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[28],{487:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(174),r=a.n(s),n=a(19),l=a(489).a(),i=a(33),c=a(284);const d=r.a.create({baseURL:n.a,timeout:6e4}),o="/auth/login";d.interceptors.request.use((e=>{const t=localStorage.getItem(i.b);return t&&(e.headers.authorization="Bearer "+t),t||e.headers["public-request"]||(l.push(o),window.location.reload()),e}),(e=>{c.a.error({message:"Error"}),Promise.reject(e)})),d.interceptors.response.use((e=>e.data),(e=>{let t={message:""};return 400!==e.response.status&&403!==e.response.status||(t.message="Authentication Fail",t.description="Please login again",localStorage.removeItem(i.b),l.push(o),window.location.reload()),404===e.response.status&&(t.message="Not Found"),500===e.response.status&&(t.message="Internal Server Error"),508===e.response.status&&(t.message="Time Out"),c.a.error(t),Promise.reject(e)}));const u=new class{async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await d.post("/api/"+e+"/get",t).catch((e=>{}))}catch(c){var a,s,r,n,l,i;return(null===c||void 0===c||null===(a=c.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===c||void 0===c||null===(r=c.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.errors)||(null===c||void 0===c||null===(l=c.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.errors)?c.response.data:{success:!1,message:"Error in getting"}}}async getSingle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await d.post("/api/"+e+"/getSingle",t)}catch(c){var a,s,r,n,l,i;return(null===c||void 0===c||null===(a=c.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===c||void 0===c||null===(r=c.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.errors)||(null===c||void 0===c||null===(l=c.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.errors)?c.response.data:{success:!1,message:"Error in getting"}}}async customRoute(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await d.post("/api/"+e,t)}catch(c){var a,s,r,n,l,i;return(null===c||void 0===c||null===(a=c.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===c||void 0===c||null===(r=c.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.errors)||(null===c||void 0===c||null===(l=c.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.errors)?c.response.data:{success:!1,message:"Error in getting"}}}async save(e,t){try{return await d.post("/api/"+e+"/create",t)}catch(c){var a,s,r,n,l,i;return(null===c||void 0===c||null===(a=c.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===c||void 0===c||null===(r=c.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.errors)||(null===c||void 0===c||null===(l=c.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.errors)?c.response.data:{success:!1,message:"Error in saving"}}}async update(e,t,a){try{t._id=a;return await d.post("/api/"+e+"/update",t)}catch(o){var s,r,n,l,i,c;return(null===o||void 0===o||null===(s=o.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||(null===o||void 0===o||null===(n=o.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.errors)||(null===o||void 0===o||null===(i=o.response)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.errors)?o.response.data:{success:!1,message:"Error in saving"}}}async uploadFile(e,t){try{return await d.post("/api/"+e+"/uploadFile",t)}catch(c){var a,s,r,n,l,i;return(null===c||void 0===c||null===(a=c.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===c||void 0===c||null===(r=c.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.errors)||(null===c||void 0===c||null===(l=c.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.errors)?c.response.data:{success:!1,message:"Error in saving"}}}async delete(e,t){try{const a={_id:t};return await d.post("/api/"+e+"/delete",a)}catch(c){var a,s,r,n,l,i;return(null===c||void 0===c||null===(a=c.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===c||void 0===c||null===(r=c.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.errors)||(null===c||void 0===c||null===(l=c.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.errors)?c.response.data:{success:!1,message:"Error in deleting"}}}};t.b=d},684:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a(44),n=a(463),l=a(283),i=a(660),c=a(465),d=a(508),o=a(467),u=a(107),j=a(490),p=a(687),m=a(688),b=a(689),h=a(106),v=a(223),x=a(510),g=a(495),O=a(507),y=a(658),f=a(487),w=a(661),_=a(664),N=a(558),C=a(1);const S=Object(_.a)("pk_test_51QbWrHFfFMx3GxeO6G8C72ke4dJCj5x80YazKFT2onSW58h1j0MtrlHK0stjeW0ioejX1MRfpprS621z2m7DLMfh009uRSSWCH"),k=e=>{let{amount:t,onSuccess:a,onCancel:r}=e;const n=Object(N.useStripe)(),l=Object(N.useElements)(),[i,c]=Object(s.useState)(!1),[d,o]=Object(s.useState)(null);return Object(C.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c(!0),o(null),n&&l)try{const e=await f.a.customRoute("createPaymentIntent",{amount:t}),{clientSecret:s}=e,r=await n.confirmCardPayment(s,{payment_method:{card:l.getElement(N.CardElement)}});r.error?o(r.error.message):a(r.paymentIntent)}catch(s){o("Payment failed. Please try again.")}finally{c(!1)}},style:{margin:"0 auto"},children:[d&&Object(C.jsx)(w.a,{message:"Payment Error",description:d,type:"error",style:{marginBottom:"16px"}}),Object(C.jsx)("div",{style:{padding:"16px",border:"1px solid #d9d9d9",borderRadius:"6px",marginBottom:"16px"},children:Object(C.jsx)(N.CardElement,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})}),Object(C.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[Object(C.jsx)(u.a,{onClick:r,disabled:i,children:"Cancel"}),Object(C.jsx)(u.a,{type:"primary",htmlType:"submit",loading:i,disabled:!n,className:"primary-solid-button",children:i?"Processing...":"Pay $".concat(t)})]})]})};var F=e=>{let{visible:t,amount:a,onSuccess:s,onCancel:r}=e;return Object(C.jsx)(i.a,{title:"Complete Payment",visible:t,onCancel:r,footer:null,width:600,centered:!0,children:Object(C.jsx)(N.Elements,{stripe:S,children:Object(C.jsx)(k,{amount:a,onSuccess:s,onCancel:r})})})};const{Title:P,Text:E}=n.a,{TabPane:A}=g.a;t.default=()=>{const{id:e}=Object(r.useParams)(),t=Object(r.useHistory)(),[a,n]=Object(s.useState)({}),[w,_]=Object(s.useState)([]),[N,S]=Object(s.useState)([]),[k,H]=Object(s.useState)(Math.random()),[D,I]=Object(s.useState)(!1),[R,M]=Object(s.useState)(null),{confirm:L}=i.a,T=()=>{const[e,t]=Object(s.useState)(!1),[a,r]=Object(s.useState)(null),[n,i]=Object(s.useState)("all"),j=[{title:"Name",dataIndex:"name",width:"20%",key:"name",render:(e,t)=>Object(C.jsxs)("div",{className:"name-container",children:[Object(C.jsx)(c.a,{src:t.created_by.profile_picture,className:"avatar-style",children:Object(C.jsxs)("span",{className:"avatar-text",children:[t.created_by.name.charAt(0).toUpperCase()," ",t.created_by.name.charAt(1).toUpperCase()]})}),Object(C.jsx)("div",{className:"name-details",children:Object(C.jsx)("div",{className:"name-text",children:t.created_by.name})})]})},{title:"Quote",dataIndex:"amount",width:"10%",key:"amount",render:e=>Object(C.jsxs)("span",{children:["$ ",e]})},{title:"Details",dataIndex:"cover_letter",width:"28%",key:"cover_letter",render:e=>Object(C.jsx)("span",{children:e.length>50?e.substring(0,50)+"...":e})},{title:"Criteria",key:"criterias",dataIndex:"criterias",width:"35%",render:e=>Object(C.jsx)("div",{className:"criteria-container",children:(e||[]).map((e=>Object(C.jsx)(d.a,{className:"criteria-tag",children:e},e)))})},{title:"Status",key:"status",width:"10%",dataIndex:"status",render:e=>{let t="status-default";return"Hired"===e&&(t="status-hired"),"Shortlisted"===e&&(t="status-shortlisted"),"Rejected"===e&&(t="status-rejected"),"Applied"===e&&(t="status-applied"),Object(C.jsx)("span",{className:"status-badge ".concat(t),children:e})}},{title:"",key:"action",width:"17%",render:e=>Object(C.jsxs)(O.b,{size:"middle",className:"action-container",children:["Hired"!=e.status&&Object(C.jsx)(C.Fragment,{children:e.isLike?Object(C.jsx)(m.a,{style:{color:"#16a34a"}}):Object(C.jsx)(p.a,{onClick:()=>x(e._id)})}),Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(b.a,{onClick:()=>(r(e),void t(!0)),style:{cursor:"pointer"}})}),"Hired"!=e.status&&Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(h.a,{onClick:()=>v(e._id),style:{color:"red"}})})]})}],v=async e=>{const t=await f.a.update("Applications",{status:"Rejected"},e);t.success?(l.b.success(t.message),H(Math.random())):(console.log(t.error),l.b.error(t.message))},x=async e=>{const t=await f.a.update("Applications",{status:"Shortlisted"},e);t.success?(l.b.success(t.message),H(Math.random())):l.b.error(t.message)},_=()=>Object(C.jsx)(y.a,{columns:j,dataSource:w.filter((e=>"all"===n||e.status.toLowerCase()===n))}),N=[{key:"all",label:Object(C.jsxs)(C.Fragment,{children:["All",Object(C.jsx)("span",{className:"ml-2 status-badge status-default",children:w.length})]}),children:Object(C.jsx)(_,{})},{key:"applied",label:Object(C.jsxs)(C.Fragment,{children:["Applied",Object(C.jsx)("span",{className:"ml-2 status-badge status-applied",children:w.filter((e=>"Applied"===e.status)).length})]}),children:Object(C.jsx)(_,{})},{key:"shortlisted",label:Object(C.jsxs)(C.Fragment,{children:["Shortlisted",Object(C.jsx)("span",{className:"ml-2 text-blue-600 status-badge status-shortlisted",children:w.filter((e=>"Shortlisted"===e.status)).length})]}),children:Object(C.jsx)(_,{})},{key:"hired",label:Object(C.jsxs)(C.Fragment,{children:["Hired",Object(C.jsx)("span",{className:"ml-2 text-green-600 status-badge status-hired",children:w.filter((e=>"Hired"===e.status)).length})]}),children:Object(C.jsx)(_,{})},{key:"rejected",label:Object(C.jsxs)(C.Fragment,{children:["Rejected",Object(C.jsx)("span",{className:"ml-2 text-red-600 status-badge status-rejected",children:w.filter((e=>"Rejected"===e.status)).length})]}),children:Object(C.jsx)(_,{})}];return Object(C.jsxs)("div",{className:"p-4 campaign-detail-tables",children:[Object(C.jsx)(o.a,{title:null,placement:"right",onClose:()=>{t(!1),r(null)},visible:e,width:450,className:"custom-drawer",children:a&&Object(C.jsxs)("div",{children:[Object(C.jsx)("span",{className:"status-badge status-".concat(a.status.toLowerCase()),style:{display:"inline-block",marginBottom:"16px"},children:a.status}),Object(C.jsxs)("div",{className:"name-container mt-4 mb-3",children:[Object(C.jsx)(c.a,{src:a.created_by.profile_picture,className:"avatar-style",children:Object(C.jsxs)("span",{className:"avatar-text",children:[a.created_by.name.charAt(0).toUpperCase()," "," ",a.created_by.name.charAt(1).toUpperCase()]})}),Object(C.jsx)("div",{className:"name-details",children:Object(C.jsx)("div",{className:"name-text",children:a.created_by.name})})]}),Object(C.jsxs)("div",{className:"mb-3",style:{display:"flex",gap:"10px"},children:[Object(C.jsx)("div",{style:{width:"20%"},children:"Quote :"}),Object(C.jsxs)("div",{style:{width:"80%"},children:["$ ",a.amount]})]}),Object(C.jsxs)("div",{className:"mb-3",style:{display:"flex",gap:"10px"},children:[Object(C.jsx)("div",{style:{width:"20%"},children:"Proposed Deadline "}),Object(C.jsx)("div",{style:{width:"80%"},children:new Date(a.deadline_date).toDateString()})]}),Object(C.jsxs)("div",{className:"mb-3",style:{display:"flex",gap:"10px"},children:[Object(C.jsx)("div",{style:{width:"20%"},children:"Criteria :"}),Object(C.jsx)("div",{style:{width:"80%"},children:Object(C.jsx)("div",{className:"criteria-container",children:a.criterias.map((e=>Object(C.jsx)(d.a,{className:"criteria-tag",children:e},e)))})})]}),Object(C.jsxs)("div",{className:"mb-3",style:{display:"flex",gap:"10px"},children:[Object(C.jsx)("div",{style:{width:"20%"},children:"Details :"}),Object(C.jsx)("div",{style:{width:"80%"},children:Object(C.jsx)("p",{style:{border:"1px solid #f0f0f0",padding:"8px",borderRadius:"4px",background:"#fafafa",maxHeight:"200px",overflowY:"auto"},children:a.cover_letter})})]}),"Hired"!=a.status&&Object(C.jsxs)("div",{style:{marginTop:"24px",display:"flex",gap:"12px"},children:[Object(C.jsx)(u.a,{type:"primary",style:{background:"#f97316",border:"none"},onClick:()=>{M(a),I(!0)},children:"Hire"}),Object(C.jsx)(u.a,{type:"default",style:{background:"#e0f2fe",color:"#0284c7"},onClick:()=>x(a._id),children:"Shortlisted"}),Object(C.jsx)(u.a,{type:"default",style:{background:"#fee2e2",color:"#b91c1c"},onClick:()=>v(a._id),children:"Reject"})]})]})}),Object(C.jsx)(g.a,{defaultActiveKey:"all",onChange:e=>(e=>{i(e)})(e),children:N.map(((e,t)=>Object(C.jsx)(A,{tab:e.label,children:e.children},e.key)))})]})};return Object(s.useEffect)((()=>{e?(async t=>{const a=await f.a.getSingle("Campaigns",t),s=await f.a.get("Contracts",{tabFilter:{campaign_id:e}}),r=await f.a.get("Applications",{tabFilter:{campaign_id:e}});n(a.data),S(s.data.data),_(r.data.data)})({_id:e}):t.goBack()}),[e,k]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"campaign-container",children:[Object(C.jsxs)("div",{className:"campaign-header",children:[Object(C.jsx)(P,{level:2,children:a.campaign_name}),Object(C.jsx)(x.Link,{to:"campaign-info/".concat(e),children:Object(C.jsxs)(u.a,{className:"secondary-color-btn",children:[Object(C.jsx)("span",{children:"View Campaign Info"})," ",Object(C.jsx)(v.a,{})]})})]}),Object(C.jsxs)(E,{className:"breadcrumb",children:["Campaigns",Object(C.jsx)("span",{className:"mx-2",children:"\u2022"}),"  All Campaigns",Object(C.jsx)("span",{className:"mx-2",children:"\u2022"}),"  ",Object(C.jsx)("span",{className:"prm-color",children:a.campaign_name})]}),Object(C.jsx)(j.a,{gutter:[24,24],className:"project-grid",children:N.map(((e,t)=>Object(C.jsxs)(C.Fragment,{children:[" ",Object(C.jsxs)("div",{className:"project-card",style:{display:"flex"},children:[Object(C.jsx)("div",{style:{width:"23%",display:"flex",justifyContent:"space-between"},children:Object(C.jsx)(c.a,{src:e.user.profile_picture,size:50})}),Object(C.jsxs)("div",{style:{width:"77%"},children:[Object(C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(C.jsx)("span",{children:Object(C.jsx)(d.a,{color:"green",className:"status-tag",children:"Hired"})}),Object(C.jsx)("span",{children:Object(C.jsxs)(E,{className:"price",children:["$",e.amount]})})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)(E,{className:"name mt-2 mb-2",children:e.user.name}),Object(C.jsxs)(E,{className:"deadline d-block mb-2",children:["Deadline: ",new Date(e.end_date).toDateString()]}),Object(C.jsx)(x.Link,{to:"view-project/"+e._id,className:"view-project-btn",children:"View Project"})]})]})]},e._id)]})))})]}),Object(C.jsx)(T,{}),Object(C.jsx)(F,{visible:D,amount:(null===R||void 0===R?void 0:R.amount)||0,onSuccess:async t=>{try{const a=await f.a.update("Applications",{status:"Hired",payment_intent_id:t.id},R._id);a.success?(await f.a.save("Contracts",{campaign_id:e,application_id:R._id,user_id:R.created_by._id,start_date:new Date,end_date:new Date(R.deadline_date),amount:R.amount,status:"In Progress",payment_intent_id:t.id,timeline:[{type:"contract_started",data:{brand_text:"You started the contract",creator_text:"Brand started the contract",date:new Date,amount:R.amount}}]}),l.b.success("Payment completed and creator hired successfully!"),H(Math.random())):l.b.error(a.message)}catch(a){l.b.error("Failed to create contract. Please try again.")}finally{I(!1),M(null)}},onCancel:()=>{I(!1),M(null)}})]})}}}]);
//# sourceMappingURL=28.830bb2be.chunk.js.map